#!/bin/bash
# @author Caio Nascimento (wxmp34)
#
# Script to diff every changed file from a branch
# with it's original version

BINPATH="/home/sw/wxmp34/bin/"

if [[ "$1" = "" ]]
then
    echo "usage: $0 branch"
    exit 1
fi

for i in $(${BINPATH}/lsbr $1 | sed 's/\/[0-9]*$/\/0/g')
do
    filename=$(echo $i |cut -d@ -f 1)
    echo "Showing differences for: $(basename $filename)"
    cleartool diff -g $i $filename 2>/dev/null
    #echo "cleartool diff -g $i $filename ;"
done

