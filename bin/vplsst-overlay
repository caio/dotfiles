#!/bin/bash

REPO=/home/rcaio/src/work/upp
DIRS=( $REPO/vpl-sst/wui $REPO/common/wui )
MOUNTPOINT="/opt/ibm/vpl-sst"


do_mount() {
    echo "Mounting UnionFS on $MOUNTPOINT"

    for d in ${DIRS[@]}; do
        PARAMS="${PARAMS}${d}=RW:"
    done
    PARAMS="${PARAMS%:}"
    unionfs -o allow_other $PARAMS $MOUNTPOINT
}

do_umount() {
    echo "Unmounting $MOUNTPOINT"
    fusermount -u $MOUNTPOINT
}

mount |grep $MOUNTPOINT >/dev/null && do_umount || do_mount

